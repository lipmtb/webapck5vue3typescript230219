{"version":3,"file":"176.vuerootbundle.js","mappings":"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","sources":["webpack://vue3webpack5-2022100601/./src/views/audio/index.vue?16ca","webpack://vue3webpack5-2022100601/./src/views/audio/index.vue?7563","webpack://vue3webpack5-2022100601/./src/views/audio/lyric.ts","webpack://vue3webpack5-2022100601/./src/views/audio/hook/useFormatLyricHook.ts","webpack://vue3webpack5-2022100601/./src/views/audio/index.vue?77df","webpack://vue3webpack5-2022100601/./src/views/audio/index.vue?2e74"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1707572094481\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\r\nconst _hoisted_1 = { class: \"audioWrapper\" };\r\nconst _hoisted_2 = [\"src\"];\r\nconst _hoisted_3 = {\r\n    class: \"lyric-wrapper\",\r\n    ref: \"relativeWrapperRef\"\r\n};\r\nconst _hoisted_4 = {\r\n    class: \"scroll-content\",\r\n    ref: \"scrollRef\"\r\n};\r\nconst _hoisted_5 = [\"data-time\"];\r\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\r\n    return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\r\n        _createElementVNode(\"audio\", {\r\n            src: _ctx.qlixSource,\r\n            controls: \"\",\r\n            ref: \"audioRef\"\r\n        }, null, 8, _hoisted_2),\r\n        _createElementVNode(\"div\", _hoisted_3, [\r\n            _createElementVNode(\"div\", _hoisted_4, [\r\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.lyricArr, (item) => {\r\n                    return (_openBlock(), _createElementBlock(\"li\", {\r\n                        key: item.time,\r\n                        \"data-time\": item.time,\r\n                        class: _normalizeClass({ active: _ctx.currentActive === item.time })\r\n                    }, _toDisplayString(item.lyric), 11, _hoisted_5));\r\n                }), 128))\r\n            ], 512)\r\n        ], 512)\r\n    ]));\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudnVlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaW5kZXgudnVlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxrQkFBa0IsSUFBSSxtQkFBbUIsRUFBRSxVQUFVLElBQUksV0FBVyxFQUFFLFFBQVEsSUFBSSxTQUFTLEVBQUUsU0FBUyxJQUFJLFVBQVUsRUFBRSxrQkFBa0IsSUFBSSxtQkFBbUIsRUFBRSxlQUFlLElBQUksZ0JBQWdCLEVBQUUsY0FBYyxJQUFJLGVBQWUsRUFBRSxNQUFNLEtBQUssQ0FBQTtBQUU3UCxNQUFNLFVBQVUsR0FBRyxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsQ0FBQTtBQUM1QyxNQUFNLFVBQVUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzFCLE1BQU0sVUFBVSxHQUFHO0lBQ2pCLEtBQUssRUFBRSxlQUFlO0lBQ3RCLEdBQUcsRUFBRSxvQkFBb0I7Q0FDMUIsQ0FBQTtBQUNELE1BQU0sVUFBVSxHQUFHO0lBQ2pCLEtBQUssRUFBRSxnQkFBZ0I7SUFDdkIsR0FBRyxFQUFFLFdBQVc7Q0FDakIsQ0FBQTtBQUNELE1BQU0sVUFBVSxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUE7QUFFaEMsTUFBTSxVQUFVLE1BQU0sQ0FBQyxJQUFTLEVBQUMsTUFBVyxFQUFDLE1BQVcsRUFBQyxNQUFXLEVBQUMsS0FBVSxFQUFDLFFBQWE7SUFDM0YsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLG1CQUFtQixDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUU7UUFDM0QsbUJBQW1CLENBQUMsT0FBTyxFQUFFO1lBQzNCLEdBQUcsRUFBRSxJQUFJLENBQUMsVUFBVTtZQUNwQixRQUFRLEVBQUUsRUFBRTtZQUNaLEdBQUcsRUFBRSxVQUFVO1NBQ2hCLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxVQUFVLENBQUM7UUFDdkIsbUJBQW1CLENBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRTtZQUNyQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFO2dCQUNyQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRSxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7b0JBQzFGLE9BQU8sQ0FBQyxVQUFVLEVBQUUsRUFBRSxtQkFBbUIsQ0FBQyxJQUFJLEVBQUU7d0JBQzlDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSTt3QkFDZCxXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUk7d0JBQ3RCLEtBQUssRUFBRSxlQUFlLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGFBQWEsS0FBSyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7cUJBQ3JFLEVBQUUsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFBO2dCQUNuRCxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQzthQUNWLEVBQUUsR0FBRyxDQUFDO1NBQ1IsRUFBRSxHQUFHLENBQUM7S0FDUixDQUFDLENBQUMsQ0FBQTtBQUNMLENBQUMifQ==","export const LYRIC_STR = `\r\n00:28 窗外的麻雀 在电线杆上多嘴;\r\n00:35 你说这一句 很有夏天的感觉;\r\n00:41 手中的铅笔 在纸上来来回回;\r\n00:47 我用几行字形容你是我的谁;\r\n00:54 秋刀鱼的滋味 猫跟你都想了解;\r\n01:01 初恋的香味就这样被我们寻回;\r\n01:08 那温暖的阳光 像刚摘的鲜艳草莓;\r\n01:14 你说你舍不得吃掉这一种感觉;\r\n01:21 雨下整夜 我的爱溢出就像雨水;\r\n01:28 院子落叶 跟我的思念厚厚一叠;\r\n01:35 几句是非 也无法将我的热情冷却;\r\n01:42 你出现在我诗的每一页;\r\n01:48 雨下整夜 我的爱溢出就像雨水;\r\n01:55 窗台蝴蝶 像诗里纷飞的美丽章节;\r\n02:02 我接着写;\r\n02:04 把永远爱你写进诗的结尾;\r\n02:10 你是我唯一想要的了解;\r\n02:42 雨下整夜 我的爱溢出就像雨水;\r\n02:49 院子落叶 跟我的思念厚厚一叠;\r\n02:56 几句是非 也无法将我的热情冷却;\r\n03:03 你出现在我诗的每一页;\r\n03:09 那饱满的稻穗 幸福了这个季节;\r\n03:16 而你的脸颊像田里熟透的番茄;\r\n03:23 你突然对我说 七里香的名字很美;\r\n03:30 我此刻却只想亲吻你倔强的嘴;\r\n03:36 雨下整夜 我的爱溢出就像雨水;\r\n03:43 院子落叶 跟我的思念厚厚一叠;\r\n03:50 几句是非 也无法将我的热情冷却;\r\n03:57 你出现在我诗的每一页;\r\n04:03 整夜 我的爱溢出就像雨水;\r\n04:10 窗台蝴蝶 像诗里纷飞的美丽章节;\r\n04:17 我接着写;\r\n04:19 把永远爱你写进诗的结尾;\r\n04:24 你是我唯一想要的了解`;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHlyaWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJseXJpYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7aUJBa0NSLENBQUMifQ==","import { ref } from \"vue\";\r\nimport { LYRIC_STR } from \"../lyric\";\r\nconst getTimeAllSecond = (time) => {\r\n    if (!time) {\r\n        return 0;\r\n    }\r\n    const arr = time.split(\":\");\r\n    const fen = Number(arr[0]);\r\n    const second = Number(arr[1]);\r\n    return fen * 60 + second;\r\n};\r\nconst getShowStr = (time, zero) => {\r\n    const timeStr = String(time);\r\n    let len = timeStr.length;\r\n    let resultArray = [timeStr];\r\n    while (len < zero) {\r\n        resultArray.unshift(\"0\");\r\n        len++;\r\n    }\r\n    return resultArray.join(\"\");\r\n};\r\nconst secToString = (second) => {\r\n    const secondRest = second % 60;\r\n    const minutes = Math.floor(second / 60);\r\n    if (minutes >= 60) {\r\n        throw new Error(\"暂不支持小时以上\");\r\n    }\r\n    return `${getShowStr(minutes, 2)}:${getShowStr(secondRest, 2)}`;\r\n};\r\nexport const useFormatLyricHook = () => {\r\n    const lyricArr = ref();\r\n    const lyricPosMapRef = ref();\r\n    const currentActive = ref(\"\");\r\n    // 显示歌词\r\n    const initLyric = () => {\r\n        const strAllArr = LYRIC_STR.split(\";\");\r\n        const map = new Map(strAllArr.map(item => {\r\n            const lyricText = item.match(/[\\S\\s]+?([\\u4e00-\\u9fa5]+[\\S\\s]*[\\u4e00-\\u9fa5]+)$/)?.[1] || \"\";\r\n            const time = item.match(/([\\S\\s]+?)[\\u4e00-\\u9fa5]+[\\S\\s]*[\\u4e00-\\u9fa5]+$/)?.[1]?.replace(/\\n/, \"\") || \"null\";\r\n            return [time, lyricText];\r\n        }));\r\n        lyricArr.value = Array.from(map.entries()).map(item => ({\r\n            time: item[0].trim(),\r\n            lyric: item[1]\r\n        }));\r\n        console.log('lyricArr.value', lyricArr.value);\r\n    };\r\n    // 歌词位置获取和存储，便于后面歌词播放滚动歌词\r\n    const getAllLyricAndCreateMap = () => {\r\n        const allDomArray = document.querySelectorAll(\".scroll-content li\");\r\n        const allLi = Array.from(allDomArray);\r\n        const newMap = new Map();\r\n        allLi.forEach(liItem => {\r\n            const ofTop = liItem.offsetTop;\r\n            const time = liItem.dataset.time;\r\n            newMap.set(getTimeAllSecond(time ?? \"\"), ofTop);\r\n        });\r\n        console.log(\"arr\", newMap);\r\n        lyricPosMapRef.value = newMap;\r\n    };\r\n    const scrollToTime = (time) => {\r\n        const lyricMapAll = lyricPosMapRef.value;\r\n        const allTimeArray = Array.from(lyricMapAll?.keys() || []);\r\n        let index = allTimeArray.findIndex((item) => Number(item) > time);\r\n        const activeIndex = index - 1 > -1 ? index - 1 : 0;\r\n        currentActive.value = secToString(Number(allTimeArray[activeIndex]));\r\n        const relativeTop = lyricMapAll?.get?.(allTimeArray[activeIndex]);\r\n        return relativeTop || 0;\r\n    };\r\n    return {\r\n        initLyric,\r\n        lyricArr,\r\n        getAllLyricAndCreateMap,\r\n        lyricPosMapRef,\r\n        scrollToTime,\r\n        currentActive\r\n    };\r\n};\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlRm9ybWF0THlyaWNIb29rLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidXNlRm9ybWF0THlyaWNIb29rLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxLQUFLLENBQUM7QUFDMUIsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQVlyQyxNQUFNLGdCQUFnQixHQUFHLENBQUMsSUFBWSxFQUFFLEVBQUU7SUFDdEMsSUFBSSxDQUFDLElBQUksRUFBRTtRQUNQLE9BQU8sQ0FBQyxDQUFDO0tBQ1o7SUFDRCxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMzQixNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUIsT0FBTyxHQUFHLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQztBQUU3QixDQUFDLENBQUE7QUFFRCxNQUFNLFVBQVUsR0FBRyxDQUFDLElBQVksRUFBRSxJQUFZLEVBQUUsRUFBRTtJQUM5QyxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztJQUN6QixJQUFJLFdBQVcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzVCLE9BQU8sR0FBRyxHQUFHLElBQUksRUFBRTtRQUNmLFdBQVcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekIsR0FBRyxFQUFFLENBQUM7S0FDVDtJQUNELE9BQU8sV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNoQyxDQUFDLENBQUE7QUFFRCxNQUFNLFdBQVcsR0FBRyxDQUFDLE1BQWMsRUFBRSxF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","import { defineComponent, nextTick, onMounted, ref, watchEffect } from \"vue\";\r\nimport { useFormatLyricHook } from \"./hook/useFormatLyricHook\";\r\nconst qlixSource = require(\"./qilx.mp3\");\r\nexport default defineComponent({\r\n    setup() {\r\n        const audioRef = ref();\r\n        const relativeWrapperRef = ref();\r\n        const scrollRef = ref();\r\n        const { initLyric, lyricArr, getAllLyricAndCreateMap, scrollToTime, currentActive } = useFormatLyricHook();\r\n        onMounted(() => {\r\n            // 歌词整理成数组\r\n            initLyric();\r\n            const audioElement = audioRef.value;\r\n            if (audioElement) {\r\n                audioElement.addEventListener('timeupdate', () => {\r\n                    console.log(\"audioElementaudioElementaudioElement\", audioElement.currentTime);\r\n                    const innerTop = scrollToTime(Math.floor(audioElement.currentTime));\r\n                    const scrollerContainerHeightHalf = (relativeWrapperRef.value?.clientHeight || 0) / 2;\r\n                    if (!scrollRef.value) {\r\n                        return;\r\n                    }\r\n                    console.log(\"scrollerContainerHeightHalf\", scrollerContainerHeightHalf, innerTop);\r\n                    scrollRef.value.style.top = `${scrollerContainerHeightHalf - innerTop}px`;\r\n                });\r\n            }\r\n        });\r\n        watchEffect(() => {\r\n            console.log(\"watchEffectwatchEffectwatchEffect\", lyricArr?.value, audioRef.value, relativeWrapperRef.value);\r\n            if (!lyricArr?.value?.length) {\r\n                return;\r\n            }\r\n            nextTick(() => {\r\n                getAllLyricAndCreateMap();\r\n            });\r\n        });\r\n        return {\r\n            audioRef,\r\n            relativeWrapperRef,\r\n            scrollRef,\r\n            lyricArr,\r\n            qlixSource,\r\n            currentActive\r\n        };\r\n    },\r\n    methods: {}\r\n});\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudnVlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaW5kZXgudnVlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLE1BQU0sS0FBSyxDQUFDO0FBQzdFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQy9ELE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUV6QyxlQUFlLGVBQWUsQ0FBQztJQUMzQixLQUFLO1FBQ0QsTUFBTSxRQUFRLEdBQUcsR0FBRyxFQUFvQixDQUFDO1FBQ3pDLE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxFQUFrQixDQUFDO1FBQ2pELE1BQU0sU0FBUyxHQUFHLEdBQUcsRUFBa0IsQ0FBQztRQUN4QyxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSx1QkFBdUIsRUFBRSxZQUFZLEVBQUUsYUFBYSxFQUFFLEdBQUcsa0JBQWtCLEVBQUUsQ0FBQztRQUMzRyxTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ1gsVUFBVTtZQUNWLFNBQVMsRUFBRSxDQUFDO1lBQ1osTUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQztZQUNwQyxJQUFJLFlBQVksRUFBRTtnQkFDZCxZQUFZLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtvQkFDN0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQ0FBc0MsRUFBRSxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUM7b0JBQzlFLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO29CQUNwRSxNQUFNLDJCQUEyQixHQUFHLENBQUMsa0JBQWtCLENBQUMsS0FBSyxFQUFFLFlBQVksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ3RGLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFO3dCQUNsQixPQUFPO3FCQUNWO29CQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLEVBQUUsMkJBQTJCLEVBQUUsUUFBUSxDQUFDLENBQUM7b0JBQ2xGLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLDJCQUEyQixHQUFHLFFBQVEsSUFBSSxDQUFDO2dCQUM5RSxDQUFDLENBQUMsQ0FBQzthQUNOO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDSCxXQUFXLENBQUMsR0FBRyxFQUFFO1lBQ2IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQ0FBbUMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDNUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO2dCQUMxQixPQUFPO2FBQ1Y7WUFDRCxRQUFRLENBQUMsR0FBRyxFQUFFO2dCQUNWLHVCQUF1QixFQUFFLENBQUM7WUFDOUIsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtRQUNGLE9BQU87WUFDSCxRQUFRO1lBQ1Isa0JBQWtCO1lBQ2xCLFNBQVM7WUFDVCxRQUFRO1lBQ1IsVUFBVTtZQUNWLGFBQWE7U0FDaEIsQ0FBQTtJQUVMLENBQUM7SUFDRCxPQUFPLEVBQUUsRUFFUjtDQUNKLENBQUMsQ0FBQSJ9","import { render } from \"./index.vue?vue&type=template&id=ab492d7a&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=ab492d7a&lang=less\"\n\nimport exportComponent from \"E:\\\\vscodeWork\\\\vue\\\\vue3webpack5-2022100601\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["cssReload","module","id","hot","dispose","accept","undefined","_hoisted_1","class","_hoisted_2","_hoisted_3","ref","_hoisted_4","_hoisted_5","getShowStr","time","zero","timeStr","String","len","length","resultArray","unshift","join","qlixSource","setup","audioRef","relativeWrapperRef","scrollRef","initLyric","lyricArr","getAllLyricAndCreateMap","scrollToTime","currentActive","lyricPosMapRef","strAllArr","split","map","Map","item","lyricText","match","replace","value","Array","from","entries","trim","lyric","console","log","allDomArray","document","querySelectorAll","allLi","newMap","forEach","liItem","ofTop","offsetTop","dataset","set","arr","Number","getTimeAllSecond","lyricMapAll","allTimeArray","keys","index","findIndex","activeIndex","second","secondRest","minutes","Math","floor","Error","secToString","relativeTop","get","useFormatLyricHook","audioElement","addEventListener","currentTime","innerTop","scrollerContainerHeightHalf","clientHeight","style","top","methods","_ctx","_cache","$props","$setup","$data","$options","_","src","controls","key","active"],"sourceRoot":""}