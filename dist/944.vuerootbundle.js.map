{"version":3,"file":"944.vuerootbundle.js","mappings":"4MACA,MAAMA,EAAa,CAAEC,MAAO,gB,kCCS5B,GAAe,QAAgB,CAC3BC,QACI,MAAMC,GAAkB,UAsBxB,MAAO,CACHA,kBACAC,aAvBiBC,UACjB,IACI,MAAMC,EAAeH,EAAgBI,MACrC,IAAKD,KAbME,EAa6BF,KAZ/B,gCACOG,KAAKD,GAYjB,OAEJ,MAAME,OClBI,CAACF,GAChBG,EAAA,OAAsB,0BAA2B,CACpDL,aAAcE,GACf,CACCI,aAAc,SDcqBC,CAAkBP,GACvCQ,EAAMC,OAAOC,IAAIC,gBAAgBP,GACjCQ,EAASC,SAASC,cAAc,KACtCF,EAAOG,KAAOP,EACdI,EAAOL,SAhBH,CAACL,GACVA,EAAKc,MAAM,sCAAsC,IAAM,OAehCC,CAAYjB,GAC9Ba,SAASK,KAAKC,YAAYP,GAC1BA,EAAOQ,QACPC,YAAW,KACPR,SAASK,KAAKI,YAAYV,EAAO,GAKzC,CAFA,MAAOW,GACHC,QAAQD,MAAMA,EAClB,CA7Bc,IAACrB,CA6Bf,EAMR,EACAuB,SAAW,EACXC,WAAY,CACRC,YAAW,OElCnB,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,SHHpD,SAAgBC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GACxD,MAAMC,GAAyB,QAAkB,eACjD,OAAQ,WAAc,QAAaA,EAAwB,KAAM,CAC7DC,UAAU,SAAS,IAAM,EACrB,IAAAC,GAAoB,MAAO1C,EAAY,EACnC,SAAgB,IAAA0C,GAAoB,QAAS,CACzC,sBAAuBP,EAAO,KAAOA,EAAO,GAAMQ,GAAaT,EAAoB,gBAAIS,IACxF,KAAM,KAAM,CACX,CAAC,KAAaT,EAAK/B,oBAEvB,IAAAuC,GAAoB,SAAU,CAC1BE,QAAST,EAAO,KAAOA,EAAO,GAE1B,IAAIU,IAAUX,EAAK9B,cAAgB8B,EAAK9B,gBAAgByC,KAC7D,WAGXH,EAAG,GAEX,I","sources":["webpack://vue3webpack5-2022100601/./src/views/downloadPage/index.vue?e050","webpack://vue3webpack5-2022100601/./src/views/downloadPage/index.vue?f6d5","webpack://vue3webpack5-2022100601/./src/service/download.ts","webpack://vue3webpack5-2022100601/./src/views/downloadPage/index.vue"],"sourcesContent":["import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\r\nconst _hoisted_1 = { class: \"downloadPage\" };\r\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\r\n    const _component_PopupLayout = _resolveComponent(\"PopupLayout\");\r\n    return (_openBlock(), _createBlock(_component_PopupLayout, null, {\r\n        children: _withCtx(() => [\r\n            _createElementVNode(\"div\", _hoisted_1, [\r\n                _withDirectives(_createElementVNode(\"input\", {\r\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_ctx.currentInputRef) = $event))\r\n                }, null, 512), [\r\n                    [_vModelText, _ctx.currentInputRef]\r\n                ]),\r\n                _createElementVNode(\"button\", {\r\n                    onClick: _cache[1] || (_cache[1] =\r\n                        //@ts-ignore\r\n                        (...args) => (_ctx.downloadFile && _ctx.downloadFile(...args)))\r\n                }, \"下载\")\r\n            ])\r\n        ]),\r\n        _: 1\r\n    }));\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudnVlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaW5kZXgudnVlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLElBQUksV0FBVyxFQUFFLGtCQUFrQixJQUFJLG1CQUFtQixFQUFFLGNBQWMsSUFBSSxlQUFlLEVBQUUsZ0JBQWdCLElBQUksaUJBQWlCLEVBQUUsT0FBTyxJQUFJLFFBQVEsRUFBRSxTQUFTLElBQUksVUFBVSxFQUFFLFdBQVcsSUFBSSxZQUFZLEVBQUUsTUFBTSxLQUFLLENBQUE7QUFFL08sTUFBTSxVQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLENBQUE7QUFFNUMsTUFBTSxVQUFVLE1BQU0sQ0FBQyxJQUFTLEVBQUMsTUFBVyxFQUFDLE1BQVcsRUFBQyxNQUFXLEVBQUMsS0FBVSxFQUFDLFFBQWE7SUFDM0YsTUFBTSxzQkFBc0IsR0FBRyxpQkFBaUIsQ0FBQyxhQUFhLENBQUUsQ0FBQTtJQUVoRSxPQUFPLENBQUMsVUFBVSxFQUFFLEVBQUUsWUFBWSxDQUFDLHNCQUFzQixFQUFFLElBQUksRUFBRTtRQUMvRCxRQUFRLEVBQUUsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ3ZCLG1CQUFtQixDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUU7Z0JBQ3JDLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUU7b0JBQzNDLHFCQUFxQixFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztpQkFDckcsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUU7b0JBQ2IsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQztpQkFDcEMsQ0FBQztnQkFDRixtQkFBbUIsQ0FBQyxRQUFRLEVBQUU7b0JBQzVCLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO3dCQUMxQyxZQUFZO3dCQUNaLENBQUMsR0FBRyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztpQkFDdEQsRUFBRSxJQUFJLENBQUM7YUFDVCxDQUFDO1NBQ0gsQ0FBQztRQUNGLENBQUMsRUFBRSxDQUFDO0tBQ0wsQ0FBQyxDQUFDLENBQUE7QUFDTCxDQUFDIn0=","import downloadLinuxFile from \"@/service/download\";\r\nimport PopupLayout from \"@/views/common/layout/PopupLayout.vue\";\r\nimport { defineComponent, ref } from \"vue\";\r\nconst checkDownloadPath = (path) => {\r\n    const pathRegMatch = /^(\\.|(\\.\\.))?(\\/\\w+)+(\\.\\w+)$/;\r\n    return path && pathRegMatch.test(path);\r\n};\r\nconst getFileName = (path) => {\r\n    return path.match(/^(\\.|\\.\\.)?(\\/\\w+)*(\\/\\w+\\.\\w+)$/)?.[3] || \"test\";\r\n};\r\nexport default defineComponent({\r\n    setup() {\r\n        const currentInputRef = ref();\r\n        const downloadFile = async () => {\r\n            try {\r\n                const downloadPath = currentInputRef.value;\r\n                if (!downloadPath || !checkDownloadPath(downloadPath)) {\r\n                    return;\r\n                }\r\n                const fileResponse = await downloadLinuxFile(downloadPath);\r\n                const url = window.URL.createObjectURL(fileResponse);\r\n                const anchor = document.createElement(\"a\");\r\n                anchor.href = url;\r\n                anchor.download = getFileName(downloadPath);\r\n                document.body.appendChild(anchor);\r\n                anchor.click();\r\n                setTimeout(() => {\r\n                    document.body.removeChild(anchor);\r\n                });\r\n            }\r\n            catch (error) {\r\n                console.error(error);\r\n            }\r\n        };\r\n        return {\r\n            currentInputRef,\r\n            downloadFile,\r\n        };\r\n    },\r\n    method() { },\r\n    components: {\r\n        PopupLayout,\r\n    },\r\n});\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudnVlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaW5kZXgudnVlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8saUJBQWlCLE1BQU0sb0JBQW9CLENBQUM7QUFDbkQsT0FBTyxXQUFXLE1BQU0sdUNBQXVDLENBQUM7QUFDaEUsT0FBTyxFQUFFLGVBQWUsRUFBYSxHQUFHLEVBQUUsTUFBTSxLQUFLLENBQUM7QUFDdEQsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLElBQVksRUFBRSxFQUFFO0lBQ3pDLE1BQU0sWUFBWSxHQUFHLCtCQUErQixDQUFDO0lBQ3JELE9BQU8sSUFBSSxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDO0FBRUYsTUFBTSxXQUFXLEdBQUcsQ0FBQyxJQUFZLEVBQUUsRUFBRTtJQUNuQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsa0NBQWtDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQztBQUN2RSxDQUFDLENBQUM7QUFFRixlQUFlLGVBQWUsQ0FBQztJQUM3QixLQUFLO1FBQ0gsTUFBTSxlQUFlLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDOUIsTUFBTSxZQUFZLEdBQUcsS0FBSyxJQUFJLEVBQUU7WUFDOUIsSUFBSTtnQkFDRixNQUFNLFlBQVksR0FBRyxlQUFlLENBQUMsS0FBSyxDQUFDO2dCQUMzQyxJQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLEVBQUU7b0JBQ3JELE9BQU87aUJBQ1I7Z0JBQ0QsTUFBTSxZQUFZLEdBQUcsTUFBTSxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDM0QsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ3JELE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDO2dCQUNsQixNQUFNLENBQUMsUUFBUSxHQUFHLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDNUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ2xDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDZixVQUFVLENBQUMsR0FBRyxFQUFFO29CQUNkLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNwQyxDQUFDLENBQUMsQ0FBQzthQUNKO1lBQUMsT0FBTyxLQUFLLEVBQUU7Z0JBQ2QsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN0QjtRQUNILENBQUMsQ0FBQztRQUNGLE9BQU87WUFDTCxlQUFlO1lBQ2YsWUFBWTtTQUNiLENBQUM7SUFDSixDQUFDO0lBQ0QsTUFBTSxLQUFJLENBQUM7SUFDWCxVQUFVLEVBQUU7UUFDVixXQUFXO0tBQ1o7Q0FDRixDQUFDLENBQUMifQ==","import serviceBaseAxios from \"./serviceBase/serviceBase\";\r\nconst downloadLinuxFile = (path) => {\r\n    return serviceBaseAxios.post(\"/test/downloadLinuxFile\", {\r\n        downloadPath: path,\r\n    }, {\r\n        responseType: \"blob\",\r\n    });\r\n};\r\nexport default downloadLinuxFile;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG93bmxvYWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkb3dubG9hZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLGdCQUFnQixNQUFNLDJCQUEyQixDQUFDO0FBRXpELE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxJQUFZLEVBQUUsRUFBRTtJQUN6QyxPQUFPLGdCQUFnQixDQUFDLElBQUksQ0FDMUIseUJBQXlCLEVBQ3pCO1FBQ0UsWUFBWSxFQUFFLElBQUk7S0FDbkIsRUFDRDtRQUNFLFlBQVksRUFBRSxNQUFNO0tBQ3JCLENBQ0YsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGVBQWUsaUJBQWlCLENBQUMifQ==","import { render } from \"./index.vue?vue&type=template&id=53e667dd&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"E:\\\\vscodeWork\\\\vue\\\\vue3webpack5-2022100601\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","class","setup","currentInputRef","downloadFile","async","downloadPath","value","path","test","fileResponse","serviceBase","responseType","download","url","window","URL","createObjectURL","anchor","document","createElement","href","match","getFileName","body","appendChild","click","setTimeout","removeChild","error","console","method","components","PopupLayout","_ctx","_cache","$props","$setup","$data","$options","_component_PopupLayout","children","_","$event","onClick","args"],"sourceRoot":""}