"use strict";(self.webpackChunkvue3webpack5_2022100601=self.webpackChunkvue3webpack5_2022100601||[]).push([[364],{3233:function(e,o,s){var n=s(4783)(e.id,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},9513:function(e,o,s){var n=s(4783)(e.id,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},9286:function(e,o,s){s.d(o,{Z:function(){return i}});var n=s(6252);const t={class:"modal-view-popup"},a={class:"pop-up-content"},l={class:"modal-bottom"};var r=(0,n.aZ)({props:["onClose"],setup(e,o){return{closeModal:()=>{e.onClose?.()}}}});s(3233);var i=(0,s(3744).Z)(r,[["render",function(e,o,s,r,i,u){return(0,n.wg)(),(0,n.iD)("div",t,[(0,n._)("div",a,[(0,n._)("div",{class:"modal-header",onClick:o[0]||(o[0]=(...o)=>e.closeModal&&e.closeModal(...o))},"x"),(0,n.WI)(e.$slots,"modal-content",{},void 0,!0),(0,n._)("div",l,[(0,n.WI)(e.$slots,"modal-bottom",{},void 0,!0)])])])}],["__scopeId","data-v-3af3bdd6"]])},2364:function(e,o,s){s.r(o),s.d(o,{default:function(){return v}});var n=s(6252),t=s(9963);const a={class:"login-view"},l={class:"confirm-form"};var r=s(6184),i=s(2557),u=s(2262),c=s(1223),d=s(9286),p=(0,n.aZ)({name:"login",props:{visible:{type:Boolean,required:!0,default:!1},onClose:Function},setup(e){const o=(0,u.Vh)(e,"visible"),s=(0,c.oR)(),n=(0,u.iH)(),t=(0,u.iH)(),a=()=>{e?.onClose?.()};return{modalVisible:o,onClose:a,nameRef:n,pswRef:t,onConfirm:async()=>{try{const e=await((e={username:"",userpassword:""})=>r.Z.post("/login",{...e}))({username:n.value,userpassword:t.value});if(console.log("loginRes",e),e.errCode)return(0,i.x)("用户名或密码错误",5e3);s.dispatch("userArea/saveUserAction",{userName:n.value,userId:e?.userInfo?.userId}),localStorage.setItem("userInfo",JSON.stringify({userName:n.value,userId:e?.userInfo?.userId,ticket:e?.jjccToken})),setTimeout((()=>{a()}),1e3)}catch(e){console.error("登录失败",e)}},reset:()=>{n.value="",t.value=""}}},components:{Modal:d.Z}});s(9513);var v=(0,s(3744).Z)(p,[["render",function(e,o,s,r,i,u){const c=(0,n.up)("Modal");return(0,n.wg)(),(0,n.iD)("div",a,[e.modalVisible?((0,n.wg)(),(0,n.j4)(c,{key:0,onClose:e.onClose},{"modal-content":(0,n.w5)((()=>[(0,n._)("div",l,[(0,n.wy)((0,n._)("input",{type:"text",placeholder:"请输入姓名","onUpdate:modelValue":o[0]||(o[0]=o=>e.nameRef=o)},null,512),[[t.nr,e.nameRef]]),(0,n.wy)((0,n._)("input",{type:"password",placeholder:"请输入密码","onUpdate:modelValue":o[1]||(o[1]=o=>e.pswRef=o)},null,512),[[t.nr,e.pswRef]])])])),"modal-bottom":(0,n.w5)((()=>[(0,n._)("button",{onClick:o[2]||(o[2]=(...o)=>e.onConfirm&&e.onConfirm(...o))},"确定"),(0,n._)("button",{onClick:o[3]||(o[3]=(...o)=>e.reset&&e.reset(...o))},"重置")])),_:1},8,["onClose"])):(0,n.kq)("",!0)])}],["__scopeId","data-v-8c361692"]])}}]);
//# sourceMappingURL=364.vuerootbundle.js.map